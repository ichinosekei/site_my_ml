
# site_my_ml Автор: Лопухов Егор Б13-303

Веб‑проект с клиент–серверной архитектурой, использующий внешнюю языковую модель через OpenRouter API.  

---

##  Описание проекта

Проект представляет собой сайт с чат‑интерфейсом:

- **Клиент (браузер)** — HTML / CSS / JavaScript  
- **Сервер** — Python + Flask  
- **Внешний сервис** — OpenRouter (LLM API)  
- **Развёртывание** — Docker, Railway  

Пользователь отправляет сообщение через браузер → сервер принимает запрос → сервер обращается к внешнему API модели → ответ возвращается пользователю.

---

##  Архитектура и сетевое взаимодействие

```
Браузер (JS)
   |
   | HTTP POST /api/chat (JSON)
   v
Flask сервер
   |
   | HTTPS POST → openrouter.ai
   v
OpenRouter (LLM)
```

### Используемые протоколы
- Клиент → сервер: **HTTP / HTTPS**
- Сервер → OpenRouter: **HTTPS**
- Формат данных: **JSON**

---

## Функциональные возможности

- Чат с языковой моделью
- Клиент–серверное взаимодействие
- Обработка сетевых ошибок (401 / 403 / 429 / timeout)
- Ограничение частоты запросов (анти‑спам на клиенте)
- Логирование запросов и ошибок
- Docker‑контейнер
- Развёртывание в облаке (Railway)
- Использование переменных окружения для секретов

---

## Безопасность

- API‑ключ **не хранится в коде**
- Используются переменные окружения (`.env` / Railway Variables)
- Ограничение длины пользовательского ввода
- Обработка некорректных запросов (400 Bad Request)
- Обработка отказов внешнего сервиса

---

## Структура проекта

```
site_my_ml/
├── client/
│   ├── templates/
│   │   ├── index.html
│   │   └── docs.html
│   └── static/
│       ├── style.css
│       ├── script.js
│       └── image/
├── servers/
│   ├── server.py
│   └── gemini.py
├── logs/
│   └── gemini.log
├── requirements.txt
├── Dockerfile
├── .env.example
└── README.md
```

---


---

## Запуск проекта локально (Docker)

```bash
docker build -t site_my_ml .
docker run --rm -p 5000:5000 --env-file .env site_my_ml
```

Открыть в браузере:  
`http://localhost:5000`

---

## Развёртывание в Railway

1. Загрузить проект в GitHub
2. Railway → New Project → Deploy from GitHub
3. Добавить переменные окружения
4. Открыть Public URL

---

## Обработка ошибок

| Код | Описание |
|----|---------|
| 400 | Некорректный запрос клиента |
| 401 | Ошибка авторизации (ключ) |
| 403 | Запрос отклонён сервисом |
| 429 | Превышен лимит запросов |
| 502 | Ошибка внешнего сервиса |
| 504 | Таймаут ответа |

---

